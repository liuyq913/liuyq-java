<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <button onclick="setWxQrcode()">测试授权</button>
    <div id="login_container"></div>
    <script>
        function setWxQrcode() {
            const s = document.createElement('script')
            s.type = 'text/javascript'
            s.src = 'https://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js'
            const wxElement = document.body.appendChild(s)
            wxElement.onload = function () {
                var obj = new WxLogin({
                    id: 'login_container', // 需要显示的容器id
                    appid: 'wx348cef1e276b69b5', // 公众号appid
                    scope: 'snsapi_base', // 网页默认即可
                    redirect_uri: encodeURIComponent('http://wx-t.meijian.tech/'), // 授权成功后回调的url
                    state: Math.ceil(Math.random() * 1000), // 可设置为简单的随机数加session用来校验
                    style: 'black', // 提供"black"、"white"可选。二维码的样式
                    href: '' // 外部css文件url，需要
                })
            }
        }
    </script>
</body>

</html>